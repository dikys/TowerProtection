# Tower Protection

**Tower Protection** — это кооперативный игровой режим для Horde Resurrection в жанре Tower Defense. Игроки должны защищать свои башни от постоянно нарастающих волн врагов, покупая и комбинируя различные улучшения. Выживите до конца, отразив все атаки, и станьте победителем!

## Геймплей

### Основная цель

Главная задача — защитить свою башню от вражеских атак. Игра заканчивается, когда все волны отражены или когда башни всех игроков уничтожены.

### Начало игры

1.  **Выбор сложности**: В начале игры хост выбирает общую сложность, которая влияет на силу и количество врагов.
2.  **Выбор режима (плана атаки)**: Затем хост выбирает один из доступных сценариев атаки. Каждый сценарий предлагает уникальный набор и последовательность вражеских волн.

### Система улучшений

Ключ к победе — правильное использование системы улучшений (баффов).

*   **Магазин улучшений**: Ваша башня может производить улучшения. Одновременно на выбор предлагается 3 случайных улучшения.
*   **Обновление ассортимента**: После покупки одного из улучшений, список доступных для покупки баффов обновляется, предлагая новый случайный набор.
*   **Типы улучшений**:
    *   **Экономика**: Постройка шахт для пассивного дохода (`Построить шахту`) или рискованный обмен здоровья на золото (`Пригласить торговца Теймура`).
    *   **Защита**: Усиление брони и здоровья башни (`Укрепить броню`, `Укрепить хп`), пассивный ремонт (`Нанять работника`) и даже создание рвов вокруг башни (`Вырыть ров`).
    *   **Атака**: Найм юнитов, которые будут автоматически атаковать врагов с вашей башни (рыцари, лучники, катапульты, маги).
    *   **Защитники**: Призыв юнитов-защитников, которые патрулируют территорию вокруг башни. Эти защитники становятся сильнее с каждым повторным приобретением этого улучшения.
    *   **Особые**: Уникальные и мощные баффы, такие как `Пригласить темного отшельника`, который удваивает ваш самый прокачанный бафф.

### Враги

Вам предстоит столкнуться с разнообразными врагами из армии Теймура. Помимо обычных воинов, вам будут противостоять **Легендарные юниты** — боссы с уникальными и опасными способностями:
*   **Легендарный рыцарь**: После смерти разделяется на двух более слабых клонов.
*   **Легендарный всадник**: Постоянно призывает на поле боя подкрепления.
*   **Легендарный инженер**: При получении урона строит рядом с собой оборонительные башни.
*   **Легендарный всадник разума**: Захватывает ваших юнитов, обращая их против вас.
*   **Легендарный всадник тьмы**: Оживляет павших воинов, заставляя их сражаться на своей стороне.
*   **Легендарный маг огня**: Атакует смертоносными огненными шарами и окружает себя пламенем.
*   **Легендарный конь алчности**: Запускает испытание на время. Убейте его быстро, чтобы получить огромную награду, или провалите испытание и заплатите штраф.

### Победа и поражение

*   **Поражение**: Если ваша башня уничтожена, вы выбываете из игры.
*   **Победа**: Если вы пережили все волны, игра заканчивается. Победителем объявляется игрок, у чьей башни осталось больше всего здоровья на момент окончания последней волны.

## Режимы игры (Планы атаки)

Хост может выбрать один из нескольких сценариев:
*   **Кармические волны**: Процедурно-генерируемые волны, сложность и состав которых меняются в зависимости от ваших действий. Каждая 4-я волна — легендарная.
*   **Бесконечные кармические волны**: То же, что и выше, но без ограничения по времени.
*   **Малые волны**: Классический режим с заранее заданными волнами и боссами.
*   **Большие волны**: Режим с крупными, смешанными волнами юнитов.
*   **Непрерывные волны**: Враги появляются непрерывным потоком, который со временем усиливается.
*   **Непрерывные волны рыцарей**: Бесконечный поток рыцарей, становящихся сильнее с каждой минутой.

## Установка и сборка мода

Все данные мода находятся в директории `ModData`: конфиги, изображения, звуки, скрипты.

Для запаковки релизной версии мода следует использовать скрипт `pack-release.bat`.
Скрипт запускается двойным нажатием левой кнопки мыши. Релизный архив `TowerProtection.hmp` будет находиться в директории `Build`.

---

### Настройка игры

Хост может изменять доступные режимы игры, редактируя массив `AttackPlansClass` в файле `ModData/Scripts/Realizations/AttackPlans.ts` перед запуском карты. Закомментируйте или раскомментируйте строчки с нужными планами атаки, чтобы включить или отключить их.

```typescript
export const AttackPlansClass = [
    AttackPlan_1,
    //AttackPlan_2, // Этот режим отключен
    AttackPlan_3,
    AttackPlan_4,
    AttackPlan_5,
    AttackPlan_6,
    AttackPlan_test
];
```

### История изменений

**20240521**
*   **(Документация)** Создан файл README.md с описанием игрового режима, его механик и особенностей.